import './polyfills.server.mjs';
import{h as f}from"./chunk-SAXPEPMR.mjs";import{i as g}from"./chunk-UGNKHL6U.mjs";import{F as y,J as l}from"./chunk-YFDK4DGQ.mjs";import{$ as h,Ed as a,Fd as v,Gd as m,U as d,ea as n,g as c}from"./chunk-EYQ2IV36.mjs";import{a as p,b as u}from"./chunk-S6KH3LOX.mjs";var k=(()=>{class o{static{this.type="[Order] Get"}constructor(t){this.payload=t}}return o})(),w=(()=>{class o{static{this.type="[Order] View"}constructor(t){this.id=t}}return o})(),A=(()=>{class o{static{this.type="[Order] Checkout"}constructor(t){this.payload=t}}return o})(),S=(()=>{class o{static{this.type="[Order] Place"}constructor(t){this.payload=t}}return o})(),_=(()=>{class o{static{this.type="[Order] Repayment"}constructor(t){this.payload=t}}return o})();var x=(()=>{class o{static{this.type="[Order] Tracking"}constructor(t){this.payload=t}}return o})(),P=(()=>{class o{static{this.type="[Order] Invoice"}constructor(t){this.payload=t}}return o})();var I=(()=>{class o{constructor(){this.http=n(y),this.skeletonLoader=!1}getOrders(t){return this.http.get(`${l.URL}/order.json`,{params:t})}viewOrder(t){return this.http.get(`${l.URL}/order/${t}`)}orderTracking(t){return this.http.get(`${l.URL}/trackOrder`,{params:t})}placeOrder(t){return this.http.post(`${l.baseURL}order`,t)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var i=class O{constructor(){this.notificationService=n(g),this.router=n(f),this.orderService=n(I)}static order(r){return r.order}static selectedOrder(r){return r.selectedOrder}static checkout(r){return r.checkout}getOrders(r,t){return this.orderService.getOrders(t?.payload).pipe(d({next:e=>{r.patchState({order:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}viewOrder(r,{id:t}){return this.orderService.skeletonLoader=!0,this.orderService.getOrders().pipe(d({next:e=>{if(e&&e.data){let s=r.getState(),b=e.data.find(R=>R.order_number==t);r.patchState(u(p({},s),{selectedOrder:b}))}},error:e=>{throw new Error(e?.error?.message)},complete:()=>{this.orderService.skeletonLoader=!1}}))}checkout(r,t){let e=r.getState(),s={total:{convert_point_amount:65.66,convert_wallet_balance:8.47,coupon_total_discount:10,points:1970,points_amount:65.66,shipping_total:0,sub_total:39.81,tax_total:1.99,total:41.8,wallet_balance:8.47}};r.patchState(u(p({},e),{checkout:s}))}placeOrder(r,t){return this.orderService.placeOrder(t.payload).pipe(d({next:e=>{this.notificationService.showSuccess(`Order placed successfully! Order #${e.order_number}`),this.router.navigate(["/"])},error:e=>{this.notificationService.showError(e?.error?.message||"Failed to place order. Please try again.")}}))}rePayment(r,t){}orderTracking(r,t){return this.orderService.orderTracking(t.payload).pipe(d({next:e=>{let s=r.getState();r.patchState(u(p({},s),{selectedOrder:e}))},error:e=>{throw new Error(e?.error?.message)}}))}downloadInvoice(r,t){}static{this.\u0275fac=function(t){return new(t||O)}}static{this.\u0275prov=h({token:O,factory:O.\u0275fac})}};c([a(k)],i.prototype,"getOrders",null);c([a(w)],i.prototype,"viewOrder",null);c([a(A)],i.prototype,"checkout",null);c([a(S)],i.prototype,"placeOrder",null);c([a(_)],i.prototype,"rePayment",null);c([a(x)],i.prototype,"orderTracking",null);c([a(P)],i.prototype,"downloadInvoice",null);c([m()],i,"order",null);c([m()],i,"selectedOrder",null);c([m()],i,"checkout",null);i=c([v({name:"order",defaults:{order:{data:[],total:0},selectedOrder:null,checkout:null}})],i);export{k as a,w as b,A as c,S as d,_ as e,x as f,P as g,i as h};
