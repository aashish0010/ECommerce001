import './polyfills.server.mjs';
import{b as Q}from"./chunk-T5L5AGEI.mjs";import{d as j}from"./chunk-AI4AC4BX.mjs";import{b as q}from"./chunk-5OBFUKR7.mjs";import{b as F}from"./chunk-2FDK5N2V.mjs";import{a as P,b as B,c as D,d as U}from"./chunk-6MX6A5FI.mjs";import{e as L}from"./chunk-J2TXBRF7.mjs";import{c as M}from"./chunk-CPIYCTE3.mjs";import{b as k}from"./chunk-PXDTNF4T.mjs";import{b as x,h as $}from"./chunk-SQVLAE5Q.mjs";import{g as I,h as R}from"./chunk-QFE7YSIO.mjs";import{a as w}from"./chunk-5NRLYQRM.mjs";import{A,F as d}from"./chunk-2RBLLN6M.mjs";import{k as c,m as a,n as _,o as f}from"./chunk-KL6F6H7P.mjs";import{A as S,Ja as C,X as g,ca as n,ha as o,i as r,va as T}from"./chunk-KHPBT355.mjs";import{a as h,b as m}from"./chunk-S6KH3LOX.mjs";var at=(()=>{class e{constructor(){this.meta=o(I),this.router=o($),this.titleService=o(R),this.platformId=o(C),this.ngZone=o(T),this.setting$=o(c).select(M.setting),this.themeOption$=o(c).select(L.themeOptions),this.product$=o(c).select(k.selectedProduct),this.blog$=o(c).select(j.selectedBlog),this.brand$=o(c).select(q.selectedBrand),this.page$=o(c).select(Q.selectedPage),this.category$=o(c).select(F.selectedCategory),this.currentMessageIndex=0,this.delay=1e3,this.isTabInFocus=!0,this.scoContent={},this.isBrowser=A(this.platformId),this.isBrowser&&(this.router.events.pipe(S(t=>t instanceof x)).subscribe(t=>{this.path=t.url,document.addEventListener("visibilitychange",()=>{this.messages=this.themeOption.general.taglines,this.ngZone.run(()=>{this.updateSeo(this.path)})}),this.updateSeo(this.path)}),this.fetchData())}fetchData(){this.setting$.subscribe(t=>this.setting=t),this.product$.subscribe(t=>this.product=t),this.blog$.subscribe(t=>this.blog=t),this.page$.subscribe(t=>this.page=t),this.brand$.subscribe(t=>this.brand=t),this.category$.subscribe(t=>this.category=t),this.themeOption$.subscribe(t=>{this.themeOption=t})}updateSeo(t){t.includes("product")?(this.product&&(this.scoContent={url:window.location.href,og_title:this.product.meta_title||this.themeOption?.seo?.meta_title,og_description:this.product.meta_description||this.themeOption?.seo?.meta_description,og_image:this.product.product_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url}),this.customSCO()):t.includes("blog")?this.blog&&(this.scoContent=m(h({},this.scoContent),{url:window.location.href,og_title:this.blog?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.blog?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.blog?.blog_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url}),this.customSCO()):t.includes("page")?(this.page&&(this.scoContent=m(h({},this.scoContent),{url:window.location.href,og_title:this.page?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.page?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.page?.page_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):t.includes("brand")?(this.brand&&(this.scoContent=m(h({},this.scoContent),{url:window.location.href,og_title:this.brand?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.brand?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.brand?.brand_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):t.includes("category")?(this.category&&(this.scoContent=m(h({},this.scoContent),{url:window.location.href,og_title:this.category?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.category?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.category?.category_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):this.updateDefaultSeo()}updateDefaultSeo(){if(this.meta.updateTag({name:"title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({name:"description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"og:type",content:"website"}),this.meta.updateTag({property:"og:url",content:this.scoContent.url}),this.meta.updateTag({property:"og:title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({property:"og:description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"og:image",content:this.scoContent.og_image}),this.meta.updateTag({property:"twitter:card",content:"summary_large_image"}),this.meta.updateTag({property:"twitter:url",content:this.scoContent.url}),this.meta.updateTag({property:"twitter:title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({property:"twitter:description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"twitter:image",content:this.scoContent.og_image}),this.themeOption?.general&&this.themeOption?.general?.exit_tagline_enable)document.addEventListener("visibilitychange",()=>{this.messages=this.themeOption.general.taglines,this.ngZone.run(()=>{if(this.isTabInFocus=!document.hidden,this.isTabInFocus)return clearTimeout(this.timeoutId),this.titleService.setTitle(this.themeOption?.general?.site_title&&this.themeOption?.general?.site_tagline?`${this.themeOption?.general?.site_title} | ${this.themeOption?.general?.site_tagline}`:"");this.updateMessage()})}),this.scoContent=m(h({},this.scoContent),{url:window.location.href,og_title:this.themeOption?.seo?.meta_title,og_description:this.themeOption?.seo?.meta_description,og_image:this.themeOption?.seo?.og_image?.original_url}),this.customSCO();else return this.titleService.setTitle(this.themeOption?.general?.site_title&&this.themeOption?.general?.site_tagline?`${this.themeOption?.general?.site_title} | ${this.themeOption?.general?.site_tagline}`:"")}customSCO(){let t=this.scoContent.og_title,i=this.scoContent.og_description;this.titleService.setTitle(t),this.meta.updateTag({name:"title",content:t}),this.meta.updateTag({name:"description",content:i}),this.meta.updateTag({property:"og:type",content:"website"}),this.meta.updateTag({property:"og:url",content:this.scoContent.url}),this.meta.updateTag({property:"og:title",content:t}),this.meta.updateTag({property:"og:description",content:i}),this.meta.updateTag({property:"og:image",content:this.scoContent.og_image}),this.meta.updateTag({property:"twitter:card",content:"summary_large_image"}),this.meta.updateTag({property:"twitter:url",content:this.scoContent.url}),this.meta.updateTag({property:"twitter:title",content:t}),this.meta.updateTag({property:"twitter:description",content:i}),this.meta.updateTag({property:"twitter:image",content:this.scoContent.og_image})}updateMessage(){clearTimeout(this.timeoutId),this.currentMessage=this.messages[this.currentMessageIndex],this.titleService.setTitle(this.currentMessage),this.currentMessageIndex=(this.currentMessageIndex+1)%this.messages.length,this.timeoutId=setTimeout(()=>{this.updateMessage()},this.delay)}ngOnDestroy(){clearTimeout(this.timeoutId)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var E=(()=>{class e{static{this.type="[Review] Get"}constructor(t){this.payload=t}}return e})(),G=(()=>{class e{static{this.type="[Review] Post"}constructor(t){this.payload=t}}return e})(),Z=(()=>{class e{static{this.type="[Review] Put"}constructor(t,i){this.id=t,this.payload=i}}return e})();var H=(()=>{class e{constructor(){this.http=o(d),this.skeletonLoader=!1}getQuestionAnswers(t){return this.http.get(`${w.URL}/question-and-answer.json`,{params:t})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var p=class v{constructor(){this.questionsAnswersService=o(H)}static questionsAnswers(s){return s.question}getQuestionAnswers(s,t){return this.questionsAnswersService.skeletonLoader=!0,this.questionsAnswersService.getQuestionAnswers(t.slug).pipe(g({next:i=>{let u=i.data.filter(O=>O.product_id==t.slug.product_id);s.patchState({question:{data:u,total:u?.length}})},complete:()=>{this.questionsAnswersService.skeletonLoader=!1},error:i=>{throw new Error(i?.error?.message)}}))}sendQuestion(s,t){}update(s,{payload:t,id:i}){}Feedback(s,t){}static{this.\u0275fac=function(t){return new(t||v)}}static{this.\u0275prov=n({token:v,factory:v.\u0275fac})}};r([a(P)],p.prototype,"getQuestionAnswers",null);r([a(B)],p.prototype,"sendQuestion",null);r([a(D)],p.prototype,"update",null);r([a(U)],p.prototype,"Feedback",null);r([f()],p,"questionsAnswers",null);p=r([_({name:"question",defaults:{question:{data:[],total:0}}})],p);var N=(()=>{class e{constructor(){this.http=o(d)}getReview(t){return this.http.get(`${w.URL}/review.json`,{params:t})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var l=class b{constructor(){this.reviewsService=o(N)}static review(s){return s.review}getReview(s,t){return this.reviewsService.getReview(t.payload).pipe(g({next:i=>{let u=i.data.filter(O=>O.product_id==t.payload.product_id);s.patchState({review:{data:u,total:u?.length}})},error:i=>{throw new Error(i?.error?.message)}}))}sendReview(s,t){}update(s,{payload:t,id:i}){}static{this.\u0275fac=function(t){return new(t||b)}}static{this.\u0275prov=n({token:b,factory:b.\u0275fac})}};r([a(E)],l.prototype,"getReview",null);r([a(G)],l.prototype,"sendReview",null);r([a(Z)],l.prototype,"update",null);r([f()],l,"review",null);l=r([_({name:"review",defaults:{review:{data:[],total:0}}})],l);export{at as a,E as b,G as c,Z as d,H as e,p as f,l as g};
