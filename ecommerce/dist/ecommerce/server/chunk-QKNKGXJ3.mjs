import './polyfills.server.mjs';
import{a as w,b as B}from"./chunk-GDLHO3HA.mjs";import"./chunk-JPQG6P5S.mjs";import"./chunk-G4SWZ5DO.mjs";import"./chunk-MLK35U7F.mjs";import"./chunk-TGILVAA5.mjs";import"./chunk-UTYEISIS.mjs";import"./chunk-TODHJHPE.mjs";import"./chunk-DRC4J3EK.mjs";import"./chunk-6EN6P2C2.mjs";import"./chunk-G2NVQX2E.mjs";import"./chunk-GURCJVPD.mjs";import{b as C}from"./chunk-QNXPPKF7.mjs";import"./chunk-KKDSYJH5.mjs";import"./chunk-UQW33LOD.mjs";import"./chunk-6MX6A5FI.mjs";import"./chunk-GSPVG2SO.mjs";import"./chunk-EWBUKRSD.mjs";import"./chunk-WXDYULOA.mjs";import"./chunk-G2BXVUH5.mjs";import"./chunk-HC23LRS7.mjs";import"./chunk-JNOS75IN.mjs";import"./chunk-DKQAZ6TZ.mjs";import{a as S}from"./chunk-P7RWWCBA.mjs";import"./chunk-L3ITFPK6.mjs";import"./chunk-7B72XMTE.mjs";import{b as P}from"./chunk-TDB3B7XP.mjs";import{a as n}from"./chunk-UK34CG32.mjs";import"./chunk-UYSUDYEZ.mjs";import{b as m,e as v,h as F}from"./chunk-SAXPEPMR.mjs";import"./chunk-IV76L2RG.mjs";import"./chunk-HXKEOFIU.mjs";import"./chunk-UGNKHL6U.mjs";import"./chunk-UI4PXNVK.mjs";import"./chunk-4CI2YZJN.mjs";import"./chunk-7JYYQ2KV.mjs";import"./chunk-YFDK4DGQ.mjs";import{Cd as s,Gc as b,Qb as o,R as l,Rb as u,Sb as p,Tb as c,ab as d,ea as i,rb as y,y as f}from"./chunk-EYQ2IV36.mjs";import{a as g,b as h}from"./chunk-S6KH3LOX.mjs";var E=()=>["category"],N=(()=>{class r{constructor(){this.route=i(v),this.router=i(F),this.store=i(s),this.product$=i(s).select(P.product),this.category$=i(s).select(C.selectedCategory),this.breadcrumb={title:"Category",items:[{label:"",active:!1}]},this.layout="collection_category_slider",this.skeleton=!0,this.filter={page:1,paginate:40,status:1,field:"created_at",price:"",category:"",tag:"",sort:"asc",sortBy:"asc",rating:"",attribute:""},this.totalItems=0,this.category$.subscribe(t=>{this.category=t,this.breadcrumb.title=`Category: ${this.category?.name}`,this.breadcrumb.items[0].label=this.category?.name});let e=this.route.snapshot.paramMap.get("slug");this.filter=h(g({},this.filter),{category:e}),this.store.dispatch(new n(this.filter))}ngOnInit(){this.routerEventsSubscription=this.router.events.pipe(f(e=>e instanceof m),l(()=>{let e=this.route.snapshot.paramMap.get("slug");return this.route.queryParams.pipe(l(t=>(this.filter={page:t.page?t.page:1,paginate:40,status:1,category:t.category?t.category:e,price:t.price?t.price:"",brand:t.brand?t.brand:"",tag:t.tag?t.tag:"",field:t.field?t.field:this.filter.field,sortBy:t.sortBy?t.sortBy:this.filter.sortBy,rating:t.rating?t.rating:"",attribute:t.attribute?t.attribute:""},this.store.dispatch(new n(this.filter)),[])))})).subscribe()}updateFilterAndFetchProducts(){this.category&&(this.filter.category=this.category.slug),this.store.dispatch(new n(this.filter))}changePage(e){this.filter.category=e,this.updateFilterAndFetchProducts()}changePaginate(e){this.filter.paginate=e,this.updateFilterAndFetchProducts()}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=y({type:r,selectors:[["app-category"]],decls:13,vars:5,consts:[[3,"breadcrumb"],[1,"section-b-space"],[1,"collection-wrapper"],[1,"container"],[1,"row"],[1,"col-sm-3","collection-filter"],[3,"filter","hideFilter"],[1,"collection-content","col-lg-9"],[1,"page-main-content"],[1,"col-sm-12"],[1,"collection-product-wrapper"],[3,"filter"]],template:function(t,a){t&1&&(c(0,"app-breadcrumb",0),u(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),c(6,"app-collection-sidebar",6),p(),u(7,"div",7)(8,"div",8)(9,"div",4)(10,"div",9)(11,"div",10),c(12,"app-collection-products",11),p()()()()()()()()()),t&2&&(o("breadcrumb",a.breadcrumb),d(6),o("filter",a.filter)("hideFilter",b(4,E)),d(6),o("filter",a.filter))},dependencies:[S,w,B],encapsulation:2})}}return r})();export{N as Category};
