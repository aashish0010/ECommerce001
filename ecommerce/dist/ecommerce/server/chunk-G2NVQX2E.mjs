import './polyfills.server.mjs';
import{F as d,J as b}from"./chunk-YFDK4DGQ.mjs";import{$ as s,Ed as c,Fd as m,Gd as l,U as u,ea as n,g as a}from"./chunk-EYQ2IV36.mjs";import{a as h,b as f}from"./chunk-S6KH3LOX.mjs";var g=(()=>{class i{constructor(){this.http=n(d),this.skeletonLoader=!1,this.offCanvasMenu=!1}getAttributes(t){return this.http.get(`${b.URL}/attribute.json`,{params:t})}getAttributeValues(t){return this.http.get(`${b.URL}/attribute-value.json`,{params:t})}getAttribute(t){return this.http.get(`${b.URL}/attribute/${t}`)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=s({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var v=(()=>{class i{static{this.type="[Attribute] Get"}constructor(t){this.payload=t}}return i})(),S=(()=>{class i{static{this.type="[Attribute] Value Get"}constructor(t){this.payload=t}}return i})(),y=(()=>{class i{static{this.type="[Attribute] Edit"}constructor(t){this.id=t}}return i})();var o=class p{constructor(){this.attributeService=n(g)}static attribute(r){return r.attribute}static attribute_value(r){return t=>t?r?.attribute_values.filter(e=>+e.attribute_id===t)?.map(e=>({label:e?.value,value:e?.id})):[]}static selectedAttribute(r){return r.selectedAttribute}getAttributes(r,t){if(!(r.getState().attribute.data.length>0))return this.attributeService.skeletonLoader=!0,this.attributeService.getAttributes(t.payload).pipe(u({next:e=>{r.patchState({attribute:{data:e.data,total:e?.total?e?.total:e.data.length}})},complete:()=>{this.attributeService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}getAttributeValues(r,t){return this.attributeService.getAttributeValues(t.payload).pipe(u({next:e=>{let A=r.getState();r.patchState(f(h({},A),{attribute_values:e.data}))},error:e=>{throw new Error(e?.error?.message)}}))}get(r,{id:t}){return this.attributeService.getAttributes().pipe(u({next:e=>{if(e&&e.data){let A=r.getState(),G=e.data.find(j=>j.id==t);r.patchState(f(h({},A),{selectedAttribute:G}))}},error:e=>{throw new Error(e?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||p)}}static{this.\u0275prov=s({token:p,factory:p.\u0275fac})}};a([c(v)],o.prototype,"getAttributes",null);a([c(S)],o.prototype,"getAttributeValues",null);a([c(y)],o.prototype,"get",null);a([l()],o,"attribute",null);a([l()],o,"attribute_value",null);a([l()],o,"selectedAttribute",null);o=a([m({name:"attribute",defaults:{attribute:{data:[],total:0},attribute_values:[],selectedAttribute:null}})],o);export{g as a,v as b,y as c,o as d};
