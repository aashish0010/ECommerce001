import './polyfills.server.mjs';
import{a as S}from"./chunk-7B72XMTE.mjs";import{h as f}from"./chunk-SAXPEPMR.mjs";import{i as I}from"./chunk-UGNKHL6U.mjs";import{F as m,J as W}from"./chunk-YFDK4DGQ.mjs";import{$ as a,Cd as u,Ed as h,Fd as w,Gd as p,U as d,ea as e,g as o}from"./chunk-EYQ2IV36.mjs";var v=(()=>{class s{static{this.type="[Wishlist] Get"}}return s})(),A=(()=>{class s{static{this.type="[Wishlist] post"}constructor(t){this.payload=t}}return s})(),y=(()=>{class s{static{this.type="[Wishlist] delete"}constructor(t){this.id=t}}return s})();var g=(()=>{class s{constructor(){this.http=e(m),this.skeletonLoader=!1}getWishlistItems(){return this.http.get(`${W.URL}/wishlist.json`)}static{this.\u0275fac=function(l){return new(l||s)}}static{this.\u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var r=class c{constructor(){this.store=e(u),this.router=e(f),this.wishlistService=e(g),this.authService=e(S),this.notificationService=e(I)}static wishlistItems(i){return i.wishlist}static wishlistIds(i){return i.wishlistIds}getWishlistItems(i){return this.wishlistService.skeletonLoader=!0,this.wishlistService.getWishlistItems().pipe(d({next:t=>{let l=t.data.map(n=>n.id);i.patchState({wishlist:{data:t.data,total:t?.total?t?.total:t.data?.length},wishlistIds:l})},complete:()=>{this.wishlistService.skeletonLoader=!1},error:t=>{throw new Error(t?.error?.message)}}))}add(i,t){this.router.navigate(["/wishlist"])}delete(i,{id:t}){let l=i.getState(),n=l.wishlist.data.filter(j=>j.id!==t);i.patchState({wishlist:{data:n,total:l.wishlist.total-1}})}static{this.\u0275fac=function(t){return new(t||c)}}static{this.\u0275prov=a({token:c,factory:c.\u0275fac})}};o([h(v)],r.prototype,"getWishlistItems",null);o([h(A)],r.prototype,"add",null);o([h(y)],r.prototype,"delete",null);o([p()],r,"wishlistItems",null);o([p()],r,"wishlistIds",null);r=o([w({name:"wishlist",defaults:{wishlist:{data:[],total:0},wishlistIds:[]}})],r);export{v as a,A as b,y as c,g as d,r as e};
