{
  "version": 3,
  "sources": ["src/app/shared/store/action/blog.action.ts", "src/app/shared/services/blog.service.ts", "src/app/shared/store/state/blog.state.ts"],
  "sourcesContent": ["import { Params } from '../../interface/core.interface';\n\nexport class GetBlogsAction {\n  static readonly type = '[Blog] Get';\n  constructor(public payload?: Params) {}\n}\n\nexport class GetBlogBySlugAction {\n  static readonly type = '[Blog] By Slug';\n  constructor(public slug: string) {}\n}\n\nexport class GetRecentBlogAction {\n  static readonly type = '[Blog] By Recent';\n  constructor(public payload?: Params) {}\n}\n\nexport class GetSelectedBlogsAction {\n  static readonly type = '[Blog] Selected';\n  constructor(public payload?: Params) {}\n}\n", "import { HttpClient } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\n\nimport { Observable } from 'rxjs';\n\nimport { environment } from '../../../environments/environment';\nimport { IBlog, IBlogModel } from '../interface/blog.interface';\nimport { Params } from '../interface/core.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BlogService {\n  private http = inject(HttpClient);\n\n  public skeletonLoader: boolean = false;\n\n  getBlogs(payload?: Params): Observable<IBlogModel> {\n    return this.http.get<IBlogModel>(`${environment.URL}/blog.json`, { params: payload });\n  }\n\n  getBlogBySlug(slug: string): Observable<IBlog> {\n    return this.http.get<IBlog>(`${environment.URL}/blog/slug/${slug}`);\n  }\n}\n", "import { Injectable, inject } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { Action, Selector, State, StateContext } from '@ngxs/store';\nimport { tap } from 'rxjs';\n\nimport { IBlog } from '../../interface/blog.interface';\nimport { BlogService } from '../../services/blog.service';\nimport {\n  GetBlogBySlugAction,\n  GetBlogsAction,\n  GetRecentBlogAction,\n  GetSelectedBlogsAction,\n} from '../action/blog.action';\n\nexport class BlogStateModel {\n  blog = {\n    data: [] as IBlog[],\n    total: 0,\n  };\n  selectedBlog: IBlog | null;\n  recentBlog: IBlog[] | [];\n  selectedBlogs: IBlog[] | [];\n}\n\n@State<BlogStateModel>({\n  name: 'blog',\n  defaults: {\n    blog: {\n      data: [],\n      total: 0,\n    },\n    selectedBlog: null,\n    recentBlog: [],\n    selectedBlogs: [],\n  },\n})\n@Injectable()\nexport class BlogState {\n  private router = inject(Router);\n  private blogService = inject(BlogService);\n\n  @Selector()\n  static blog(state: BlogStateModel) {\n    return state.blog;\n  }\n\n  @Selector()\n  static selectedBlog(state: BlogStateModel) {\n    return state.selectedBlog;\n  }\n\n  @Selector()\n  static resentBlog(state: BlogStateModel) {\n    return state.recentBlog;\n  }\n\n  @Selector()\n  static selectedBlogs(state: BlogStateModel) {\n    return state.selectedBlogs;\n  }\n\n  @Action(GetBlogsAction)\n  getBlogs(ctx: StateContext<BlogStateModel>, action: GetBlogsAction) {\n    this.blogService.skeletonLoader = true;\n    return this.blogService.getBlogs(action.payload).pipe(\n      tap({\n        next: result => {\n          ctx.patchState({\n            blog: {\n              data: result.data,\n              total: result?.total ? result?.total : result.data?.length,\n            },\n          });\n        },\n        complete: () => {\n          this.blogService.skeletonLoader = false;\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n\n  @Action(GetBlogBySlugAction)\n  getBlogBySlug(ctx: StateContext<BlogStateModel>, { slug }: GetBlogBySlugAction) {\n    return this.blogService.getBlogs().pipe(\n      tap({\n        next: results => {\n          if (results && results.data) {\n            const state = ctx.getState();\n            const result = results.data.find(blog => blog.slug == slug);\n            ctx.patchState({\n              ...state,\n              selectedBlog: result,\n            });\n          }\n        },\n        error: err => {\n          void this.router.navigate(['/404']);\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n\n  @Action(GetRecentBlogAction)\n  getRecentBlogs(ctx: StateContext<BlogStateModel>, action: GetRecentBlogAction) {\n    return this.blogService.getBlogs(action.payload).pipe(\n      tap({\n        next: result => {\n          ctx.patchState({\n            recentBlog: result.data,\n          });\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n\n  @Action(GetSelectedBlogsAction)\n  getSelectedBlogs(ctx: StateContext<BlogStateModel>, action: GetSelectedBlogsAction) {\n    return this.blogService.getBlogs(action.payload).pipe(\n      tap({\n        next: result => {\n          ctx.patchState({\n            selectedBlogs: result.data,\n          });\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n}\n"],
  "mappings": "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",
  "names": ["BlogState"]
}
