import{a as S,b as y}from"./chunk-TRFZOEGU.js";import{A as B,E as i}from"./chunk-KTUN43P2.js";import{$ as s,U as m,ea as p,g as a,n as h,qd as f,rd as b,sd as g}from"./chunk-XZ37OMXB.js";import{a as c,b as u}from"./chunk-4CLCTAJ7.js";var I=(()=>{class o{constructor(){this.http=p(B),this.skeletonLoader=!1}getBrands(e){let t=c({companyInfoId:i.companyInfoId},e);return this.http.get(`${i.baseURL}brand`,{params:t}).pipe(h(d=>({data:d.data||[],total:d.total||0,current_page:1,per_page:d.total||100,last_page:1})))}getBrandBySlug(e){let t={companyInfoId:i.companyInfoId};return this.http.get(`${i.baseURL}brand/${e}`,{params:t})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=s({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var n=class l{constructor(){this.brandService=p(I)}static brand(r){return r.brand}static selectedBrand(r){return r.selectedBrand}getBrands(r,e){if(!(r.getState().brand.data.length>0))return this.brandService.skeletonLoader=!0,this.brandService.getBrands(e.payload).pipe(m({next:t=>{r.patchState({brand:{data:t.data,total:t?.total?t?.total:t.data?.length}})},complete:()=>{this.brandService.skeletonLoader=!1},error:t=>{throw new Error(t?.error?.message)}}))}getBrandBySlug(r,e){return this.brandService.getBrands().pipe(m({next:t=>{if(t&&t.data){let d=t.data.find(j=>j.slug==e.slug),v=r.getState();r.patchState(u(c({},v),{selectedBrand:d}))}},error:t=>{throw new Error(t?.error?.message)}}))}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275prov=s({token:l,factory:l.\u0275fac})}};a([f(S)],n.prototype,"getBrands",null);a([f(y)],n.prototype,"getBrandBySlug",null);a([g()],n,"brand",null);a([g()],n,"selectedBrand",null);n=a([b({name:"brand",defaults:{brand:{data:[],total:0},selectedBrand:null}})],n);export{I as a,n as b};
