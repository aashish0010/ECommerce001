{
  "version": 3,
  "sources": ["src/app/components/shop/category/category.ts", "src/app/components/shop/category/category.html"],
  "sourcesContent": ["import { Component, inject } from '@angular/core';\nimport { ActivatedRoute, NavigationEnd, Params, Router } from '@angular/router';\n\nimport { Store } from '@ngxs/store';\nimport { filter, Observable, Subscription, switchMap } from 'rxjs';\n\nimport { Breadcrumb } from '../../../shared/components/widgets/breadcrumb/breadcrumb';\nimport { IBreadcrumb } from '../../../shared/interface/breadcrumb.interface';\nimport { ICategory } from '../../../shared/interface/category.interface';\nimport { IProductModel } from '../../../shared/interface/product.interface';\nimport { GetProductsAction } from '../../../shared/store/action/product.action';\nimport { CategoryState } from '../../../shared/store/state/category.state';\nimport { ProductState } from '../../../shared/store/state/product.state';\nimport { CollectionProducts } from '../collection/widgets/collection-products/collection-products';\nimport { Sidebar } from '../collection/widgets/sidebar/sidebar';\n\n@Component({\n  selector: 'app-category',\n  imports: [Breadcrumb, Sidebar, CollectionProducts],\n  templateUrl: './category.html',\n  styleUrl: './category.scss',\n})\nexport class Category {\n  private route = inject(ActivatedRoute);\n  private router = inject(Router);\n  private store = inject(Store);\n\n  product$: Observable<IProductModel> = inject(Store).select(ProductState.product);\n  category$: Observable<ICategory> = inject(Store).select(\n    CategoryState.selectedCategory,\n  ) as Observable<ICategory>;\n\n  public breadcrumb: IBreadcrumb = {\n    title: 'Category',\n    items: [{ label: '', active: false }],\n  };\n  public layout: string = 'collection_category_slider';\n  public skeleton: boolean = true;\n  public category: ICategory;\n  public activeCategory: string | null;\n  public filter: Params = {\n    page: 1, // Current page number\n    paginate: 40, // Display per page,\n    status: 1,\n    field: 'created_at',\n    price: '',\n    category: '',\n    tag: '',\n    sort: 'asc', // ASC, DSC\n    sortBy: 'asc',\n    rating: '',\n    attribute: '',\n  };\n\n  public totalItems: number = 0;\n  private routerEventsSubscription: Subscription;\n\n  constructor() {\n    this.category$.subscribe(category => {\n      this.category = category;\n      this.breadcrumb.title = `Category: ${this.category?.name}`;\n      this.breadcrumb.items[0].label = this.category?.name;\n    });\n\n    const category = this.route.snapshot.paramMap.get('slug');\n    this.filter = {\n      ...this.filter,\n      category: category,\n    };\n    this.store.dispatch(new GetProductsAction(this.filter));\n  }\n\n  ngOnInit() {\n    this.routerEventsSubscription = this.router.events\n      .pipe(\n        filter(event => event instanceof NavigationEnd),\n        switchMap(() => {\n          const category = this.route.snapshot.paramMap.get('slug');\n          return this.route.queryParams.pipe(\n            switchMap(params => {\n              this.filter = {\n                page: params['page'] ? params['page'] : 1,\n                paginate: 40,\n                status: 1,\n                category: params['category'] ? params['category'] : category,\n                price: params['price'] ? params['price'] : '',\n                brand: params['brand'] ? params['brand'] : '',\n                tag: params['tag'] ? params['tag'] : '',\n                field: params['field'] ? params['field'] : this.filter['field'],\n                sortBy: params['sortBy'] ? params['sortBy'] : this.filter['sortBy'],\n                rating: params['rating'] ? params['rating'] : '',\n                attribute: params['attribute'] ? params['attribute'] : '',\n              };\n              this.store.dispatch(new GetProductsAction(this.filter));\n              return [];\n            }),\n          );\n        }),\n      )\n      .subscribe();\n  }\n\n  private updateFilterAndFetchProducts() {\n    if (this.category) {\n      this.filter['category'] = this.category.slug;\n    }\n    this.store.dispatch(new GetProductsAction(this.filter));\n  }\n\n  public changePage(page: number) {\n    this.filter['category'] = page;\n    this.updateFilterAndFetchProducts();\n  }\n\n  public changePaginate(paginate: number) {\n    this.filter['paginate'] = paginate;\n    this.updateFilterAndFetchProducts();\n  }\n\n  ngOnDestroy() {\n    if (this.routerEventsSubscription) {\n      this.routerEventsSubscription.unsubscribe();\n    }\n  }\n}\n", "<app-breadcrumb [breadcrumb]=\"breadcrumb\" />\n\n<section class=\"section-b-space\">\n  <div class=\"collection-wrapper\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-sm-3 collection-filter\">\n          <app-collection-sidebar [filter]=\"filter\" [hideFilter]=\"['category']\" />\n        </div>\n        <div class=\"collection-content col-lg-9\">\n          <div class=\"page-main-content\">\n            <div class=\"row\">\n              <div class=\"col-sm-12\">\n                <div class=\"collection-product-wrapper\">\n                  <app-collection-products [filter]=\"filter\" />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n"],
  "mappings": "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",
  "names": ["category"]
}
