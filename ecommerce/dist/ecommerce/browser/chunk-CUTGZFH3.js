import{a as w}from"./chunk-SCJBLV56.js";import{A as O,E as x}from"./chunk-KTUN43P2.js";import{$ as d,C as b,U as D,ea as l,g as n,i as f,m as g,qd as h,rd as k,sd as s,t as v}from"./chunk-XZ37OMXB.js";import{a,b as i}from"./chunk-4CLCTAJ7.js";var T=(()=>{class r{static{this.type="[Theme IOption] Get"}}return r})(),U=(()=>{class r{static{this.type="[Theme IOption] Update Session"}constructor(e,o){this.slug=e,this.value=o}}return r})(),B=(()=>{class r{static{this.type="[Theme IOption] Update Product Box"}constructor(e){this.value=e}}return r})();var C=(()=>{class r{constructor(){this.http=l(O)}getCompanyDetails(){let e=encodeURIComponent(x.companyCode);return this.http.get(`${x.baseURL}Auth/companydetails?companyCode=${e}`)}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275prov=d({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var c=class y{constructor(){this.themeOptionService=l(w),this.companyDetailService=l(C)}static themeOptions(t){return t.theme_option}static exit(t){return t.exit}static cookies(t){return t.cookies}static newsletter(t){return t.newsletter}static productBox(t){return t.productBox}getThemeOptions(t){return v({theme:this.themeOptionService.getThemeOption().pipe(g(3e3),b(()=>f({options:{}}))),company:this.companyDetailService.getCompanyDetails().pipe(g(3e3),b(()=>f(null)))}).pipe(D({next:e=>{let o=t.getState(),u=e?.theme?.options??e?.theme??{},_=e?.company?this.applyCompanyDetails(u,e.company):u;t.setState(i(a({},o),{theme_option:_}))},error:e=>{throw new Error(e?.error?.message)}}))}UpdateSession(t,e){let o=t.getState();t.patchState(i(a({},o),{cookies:e.slug=="cookies"?e.value:o.cookies,exit:e.slug=="exit"?e.value:o.exit,newsletter:e.slug=="newsletter"?e.value:o.newsletter}))}UpdateProductBox(t,e){let o=t.getState();t.patchState(i(a({},o),{productBox:e.value}))}applyCompanyDetails(t,e){if(!t||!e?.companyDetailRes?.companyDetail)return t;let o=e.companyDetailRes.companyDetail,u=e.companyDetailRes.companyServices||[],_=e.companyDetailRes.companySocialInfos||[],m=p=>_.find(A=>A?.socialMediaName?.toLowerCase()===p.toLowerCase())?.socialMediaLink,S=u.map(p=>p?.name).filter(p=>!!p);return i(a({},t),{general:i(a({},t.general),{site_title:o.companyName||t.general?.site_title,site_tagline:o.companyDescription||t.general?.site_tagline}),seo:i(a({},t.seo),{meta_title:o.companyName||t.seo?.meta_title,og_title:o.companyName||t.seo?.og_title,meta_description:o.companyDescription||t.seo?.meta_description,og_description:o.companyDescription||t.seo?.og_description,meta_tags:S.length?S.join(", "):t.seo?.meta_tags}),header:i(a({},t.header),{support_number:o.companyPhoneNumber||t.header?.support_number}),footer:i(a({},t.footer),{footer_about:o.companyDescription||t.footer?.footer_about,about_email:o.companyEmail||t.footer?.about_email,support_email:o.companyEmail||t.footer?.support_email,support_number:o.companyPhoneNumber||t.footer?.support_number,facebook:m("Facebook")||t.footer?.facebook,instagram:m("Instagram")||t.footer?.instagram,twitter:m("Twitter")||"",pinterest:m("Pinterest")||"",tiktok:m("Tiktok")||""}),contact_us:i(a({},t.contact_us),{description:o.companyDescription||t.contact_us?.description,detail_1:i(a({},t.contact_us?.detail_1),{text:o.companyPhoneNumber||t.contact_us?.detail_1?.text}),detail_3:i(a({},t.contact_us?.detail_3),{text:o.companyEmail||t.contact_us?.detail_3?.text}),detail_4:i(a({},t.contact_us?.detail_4),{text:o.companyEmail||t.contact_us?.detail_4?.text})}),about_us:i(a({},t.about_us),{about:i(a({},t.about_us?.about),{description:o.companyDescription||t.about_us?.about?.description})})})}static{this.\u0275fac=function(e){return new(e||y)}}static{this.\u0275prov=d({token:y,factory:y.\u0275fac})}};n([h(T)],c.prototype,"getThemeOptions",null);n([h(U)],c.prototype,"UpdateSession",null);n([h(B)],c.prototype,"UpdateProductBox",null);n([s()],c,"themeOptions",null);n([s()],c,"exit",null);n([s()],c,"cookies",null);n([s()],c,"newsletter",null);n([s()],c,"productBox",null);c=n([k({name:"theme_option",defaults:{theme_option:null,exit:!0,cookies:!0,newsletter:!0,productBox:""}})],c);export{C as a,T as b,U as c,B as d,c as e};
