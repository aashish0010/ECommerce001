{
  "version": 3,
  "sources": ["src/app/shared/store/action/point.action.ts", "src/app/shared/services/point.service.ts", "src/app/shared/store/state/point.state.ts"],
  "sourcesContent": ["import { Params } from '../../interface/core.interface';\n\nexport class GetUserTransactionAction {\n  static readonly type = '[Point] Transaction Get';\n  constructor(public payload?: Params) {}\n}\n", "import { HttpClient } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\nimport { Params } from '@angular/router';\n\nimport { Observable } from 'rxjs';\n\nimport { environment } from '../../../environments/environment';\nimport { IPoint } from '../interface/point.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PointService {\n  private http = inject(HttpClient);\n\n  getUserTransaction(payload?: Params): Observable<IPoint> {\n    return this.http.get<IPoint>(`${environment.URL}/points.json`, { params: payload });\n  }\n}\n", "import { Injectable, inject } from '@angular/core';\n\nimport { Action, Selector, State, StateContext } from '@ngxs/store';\nimport { tap } from 'rxjs';\n\nimport { ITransactionsData } from '../../interface/point.interface';\nimport { PointService } from '../../services/point.service';\nimport { GetUserTransactionAction } from '../action/point.action';\n\nexport class PointStateModel {\n  point = {\n    balance: 0 as number,\n    transactions: {\n      data: [] as ITransactionsData[],\n      total: 0,\n    },\n  };\n}\n\n@State<PointStateModel>({\n  name: 'point',\n  defaults: {\n    point: {\n      balance: 0 as number,\n      transactions: {\n        data: [],\n        total: 0,\n      },\n    },\n  },\n})\n@Injectable()\nexport class PointState {\n  private pointService = inject(PointService);\n\n  @Selector()\n  static point(state: PointStateModel) {\n    return state.point;\n  }\n\n  @Action(GetUserTransactionAction)\n  getUserTransaction(ctx: StateContext<PointStateModel>, { payload }: GetUserTransactionAction) {\n    return this.pointService.getUserTransaction(payload).pipe(\n      tap({\n        next: result => {\n          ctx.patchState({\n            point: {\n              balance: result?.balance,\n              transactions: {\n                data: result?.transactions?.data,\n                total: result?.transactions?.total\n                  ? result?.transactions?.total\n                  : result?.transactions?.data?.length,\n              },\n            },\n          });\n        },\n        error: err => {\n          ctx.patchState({\n            point: {\n              balance: 0,\n              transactions: {\n                data: [],\n                total: 0,\n              },\n            },\n          });\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAEM,IAAO,2BAAP,MAA+B;;AACnB,SAAA,OAAO;EAA0B;EACjD,YAAmB,SAAgB;AAAhB,SAAA,UAAA;EAAmB;;;;ACQlC,IAAO,eAAP,MAAO,cAAY;EAHzB,cAAA;AAIU,SAAA,OAAO,OAAO,UAAU;;EAEhC,mBAAmB,SAAgB;AACjC,WAAO,KAAK,KAAK,IAAY,GAAG,YAAY,GAAG,gBAAgB,EAAE,QAAQ,QAAO,CAAE;EACpF;;;uCALW,eAAY;IAAA;EAAA;;4EAAZ,eAAY,SAAZ,cAAY,WAAA,YAFX,OAAM,CAAA;EAAA;;;sEAEP,cAAY,CAAA;UAHxB;WAAW;MACV,YAAY;KACb;;;;;ACqBM,IAAM,aAAN,MAAMA,YAAU;EAAhB,cAAA;AACG,SAAA,eAAe,OAAO,YAAY;;EAG1C,OAAO,MAAM,OAAsB;AACjC,WAAO,MAAM;EACf;EAGA,mBAAmB,KAAoC,EAAE,QAAO,GAA4B;AAC1F,WAAO,KAAK,aAAa,mBAAmB,OAAO,EAAE,KACnD,IAAI;MACF,MAAM,YAAS;AACb,YAAI,WAAW;UACb,OAAO;YACL,SAAS,QAAQ;YACjB,cAAc;cACZ,MAAM,QAAQ,cAAc;cAC5B,OAAO,QAAQ,cAAc,QACzB,QAAQ,cAAc,QACtB,QAAQ,cAAc,MAAM;;;SAGrC;MACH;MACA,OAAO,SAAM;AACX,YAAI,WAAW;UACb,OAAO;YACL,SAAS;YACT,cAAc;cACZ,MAAM,CAAA;cACN,OAAO;;;SAGZ;AACD,cAAM,IAAI,MAAM,KAAK,OAAO,OAAO;MACrC;KACD,CAAC;EAEN;;;uCAvCWA,aAAU;IAAA;EAAA;;4EAAVA,aAAU,SAAVA,YAAU,UAAA,CAAA;EAAA;;AASrB,WAAA;EADC,OAAO,wBAAwB;;AAJzB,WAAA;EADN,SAAQ;;AAHE,aAAU,WAAA;EAbtB,MAAuB;IACtB,MAAM;IACN,UAAU;MACR,OAAO;QACL,SAAS;QACT,cAAc;UACZ,MAAM,CAAA;UACN,OAAO;;;;GAId;GAEY,UAAU;;sEAAV,YAAU,CAAA;UADtB;;;",
  "names": ["PointState"]
}
