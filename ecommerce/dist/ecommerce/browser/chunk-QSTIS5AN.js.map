{
  "version": 3,
  "sources": ["src/app/shared/store/action/setting.action.ts", "src/app/shared/services/setting.service.ts", "src/app/shared/store/state/setting.state.ts"],
  "sourcesContent": ["import { ICurrency } from '../../interface/currency.interface';\n\nexport class GetSettingOptionAction {\n  static readonly type = '[Setting] Get';\n}\n\nexport class SelectedCurrencyAction {\n  static readonly type = '[Setting] SetCurrency';\n  constructor(public payload: ICurrency) {}\n}\n", "import { HttpClient } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\n\nimport { Observable } from 'rxjs';\n\nimport { environment } from '../../../environments/environment';\nimport { ISetting } from '../interface/setting.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SettingService {\n  private http = inject(HttpClient);\n\n  getSettingOption(): Observable<ISetting> {\n    return this.http.get<ISetting>(`${environment.URL}/settings.json`);\n  }\n}\n", "import { Injectable, inject } from '@angular/core';\n\nimport { Action, Selector, State, StateContext } from '@ngxs/store';\nimport { tap } from 'rxjs';\n\nimport { ICurrency } from '../../interface/currency.interface';\nimport { IValues } from '../../interface/setting.interface';\nimport { SettingService } from '../../services/setting.service';\nimport { GetSettingOptionAction, SelectedCurrencyAction } from '../action/setting.action';\n\nexport class SettingStateModel {\n  setting: IValues | null;\n  selectedCurrency: ICurrency | null;\n}\n\n@State<SettingStateModel>({\n  name: 'setting',\n  defaults: {\n    setting: null,\n    selectedCurrency: null,\n  },\n})\n@Injectable()\nexport class SettingState {\n  private settingService = inject(SettingService);\n\n  @Selector()\n  static setting(state: SettingStateModel) {\n    return state.setting;\n  }\n\n  @Selector()\n  static selectedCurrency(state: SettingStateModel) {\n    return state.selectedCurrency;\n  }\n\n  @Action(GetSettingOptionAction)\n  getSettingOptions(ctx: StateContext<SettingStateModel>) {\n    return this.settingService.getSettingOption().pipe(\n      tap({\n        next: result => {\n          const state = ctx.getState();\n\n          if (!state.selectedCurrency && result?.values?.general) {\n            state.selectedCurrency = result?.values?.general.default_currency;\n          }\n\n          ctx.patchState({\n            ...state,\n            setting: result.values,\n          });\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n\n  @Action(SelectedCurrencyAction)\n  selectedCurrency(ctx: StateContext<SettingStateModel>, action: SelectedCurrencyAction) {\n    const state = ctx.getState();\n    ctx.patchState({\n      ...state,\n      selectedCurrency: action.payload,\n    });\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAEM,IAAO,yBAAP,MAA6B;;AACjB,SAAA,OAAO;EAAgB;;AAGnC,IAAO,yBAAP,MAA6B;;AACjB,SAAA,OAAO;EAAwB;EAC/C,YAAmB,SAAkB;AAAlB,SAAA,UAAA;EAAqB;;;;ACGpC,IAAO,iBAAP,MAAO,gBAAc;EAH3B,cAAA;AAIU,SAAA,OAAO,OAAO,UAAU;;EAEhC,mBAAgB;AACd,WAAO,KAAK,KAAK,IAAc,GAAG,YAAY,GAAG,gBAAgB;EACnE;;;uCALW,iBAAc;IAAA;EAAA;;4EAAd,iBAAc,SAAd,gBAAc,WAAA,YAFb,OAAM,CAAA;EAAA;;;sEAEP,gBAAc,CAAA;UAH1B;WAAW;MACV,YAAY;KACb;;;;;ACaM,IAAM,eAAN,MAAMA,cAAY;EAAlB,cAAA;AACG,SAAA,iBAAiB,OAAO,cAAc;;EAG9C,OAAO,QAAQ,OAAwB;AACrC,WAAO,MAAM;EACf;EAGA,OAAO,iBAAiB,OAAwB;AAC9C,WAAO,MAAM;EACf;EAGA,kBAAkB,KAAoC;AACpD,WAAO,KAAK,eAAe,iBAAgB,EAAG,KAC5C,IAAI;MACF,MAAM,YAAS;AACb,cAAM,QAAQ,IAAI,SAAQ;AAE1B,YAAI,CAAC,MAAM,oBAAoB,QAAQ,QAAQ,SAAS;AACtD,gBAAM,mBAAmB,QAAQ,QAAQ,QAAQ;QACnD;AAEA,YAAI,WAAW,iCACV,QADU;UAEb,SAAS,OAAO;UACjB;MACH;MACA,OAAO,SAAM;AACX,cAAM,IAAI,MAAM,KAAK,OAAO,OAAO;MACrC;KACD,CAAC;EAEN;EAGA,iBAAiB,KAAsC,QAA8B;AACnF,UAAM,QAAQ,IAAI,SAAQ;AAC1B,QAAI,WAAW,iCACV,QADU;MAEb,kBAAkB,OAAO;MAC1B;EACH;;;uCA3CWA,eAAY;IAAA;EAAA;;4EAAZA,eAAY,SAAZA,cAAY,UAAA,CAAA;EAAA;;AAcvB,WAAA;EADC,OAAO,sBAAsB;;AAwB9B,WAAA;EADC,OAAO,sBAAsB;;AAhCvB,WAAA;EADN,SAAQ;;AAMF,WAAA;EADN,SAAQ;;AARE,eAAY,WAAA;EARxB,MAAyB;IACxB,MAAM;IACN,UAAU;MACR,SAAS;MACT,kBAAkB;;GAErB;GAEY,YAAY;;sEAAZ,cAAY,CAAA;UADxB;;;",
  "names": ["SettingState"]
}
