{
  "version": 3,
  "sources": ["src/app/shared/services/brand.service.ts", "src/app/shared/store/state/brand.state.ts"],
  "sourcesContent": ["import { HttpClient } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\n\nimport { Observable, map } from 'rxjs';\n\nimport { environment } from '../../../environments/environment';\nimport { IBrand, IBrandModel } from '../interface/brand.interface';\nimport { Params } from '../interface/core.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BrandService {\n  private http = inject(HttpClient);\n\n  public skeletonLoader: boolean = false;\n\n  getBrands(payload?: Params): Observable<IBrandModel> {\n    const params = { companyInfoId: environment.companyInfoId, ...payload };\n    return this.http.get<any>(`${environment.baseURL}brand`, { params }).pipe(\n      map(res => ({\n        data: (res.data || []) as IBrand[],\n        total: res.total || 0,\n        current_page: 1,\n        per_page: res.total || 100,\n        last_page: 1,\n      } as IBrandModel)),\n    );\n  }\n\n  getBrandBySlug(slug: string): Observable<IBrand> {\n    const params = { companyInfoId: environment.companyInfoId };\n    return this.http.get<IBrand>(`${environment.baseURL}brand/${slug}`, { params });\n  }\n}\n", "import { Injectable, inject } from '@angular/core';\n\nimport { Action, Selector, State, StateContext } from '@ngxs/store';\nimport { tap } from 'rxjs';\n\nimport { IBrand } from '../../interface/brand.interface';\nimport { BrandService } from '../../services/brand.service';\nimport { GetBrandBySlugAction, GetBrandsAction } from '../action/brand.action';\n\nexport class BrandStateModel {\n  brand = {\n    data: [] as IBrand[],\n    total: 0,\n  };\n  selectedBrand: IBrand | null;\n}\n\n@State<BrandStateModel>({\n  name: 'brand',\n  defaults: {\n    brand: {\n      data: [],\n      total: 0,\n    },\n    selectedBrand: null,\n  },\n})\n@Injectable()\nexport class BrandState {\n  private brandService = inject(BrandService);\n\n  @Selector()\n  static brand(state: BrandStateModel) {\n    return state.brand;\n  }\n\n  @Selector()\n  static selectedBrand(state: BrandStateModel) {\n    return state.selectedBrand;\n  }\n\n  @Action(GetBrandsAction)\n  getBrands(ctx: StateContext<BrandStateModel>, action: GetBrandsAction) {\n    if (ctx.getState().brand.data.length > 0) return;\n    this.brandService.skeletonLoader = true;\n    return this.brandService.getBrands(action.payload).pipe(\n      tap({\n        next: result => {\n          ctx.patchState({\n            brand: {\n              data: result.data,\n              total: result?.total ? result?.total : result.data?.length,\n            },\n          });\n        },\n        complete: () => {\n          this.brandService.skeletonLoader = false;\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n\n  @Action(GetBrandBySlugAction)\n  getBrandBySlug(ctx: StateContext<BrandStateModel>, action: GetBrandBySlugAction) {\n    return this.brandService.getBrands().pipe(\n      tap({\n        next: results => {\n          if (results && results.data) {\n            const result = results.data.find(brand => brand.slug == action.slug);\n            const state = ctx.getState();\n            ctx.patchState({\n              ...state,\n              selectedBrand: result,\n            });\n          }\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYM,IAAO,eAAP,MAAO,cAAY;EAHzB,cAAA;AAIU,SAAA,OAAO,OAAO,UAAU;AAEzB,SAAA,iBAA0B;;EAEjC,UAAU,SAAgB;AACxB,UAAM,SAAS,iBAAE,eAAe,YAAY,iBAAkB;AAC9D,WAAO,KAAK,KAAK,IAAS,GAAG,YAAY,OAAO,SAAS,EAAE,OAAM,CAAE,EAAE,KACnE,IAAI,UAAQ;MACV,MAAO,IAAI,QAAQ,CAAA;MACnB,OAAO,IAAI,SAAS;MACpB,cAAc;MACd,UAAU,IAAI,SAAS;MACvB,WAAW;MACI,CAAC;EAEtB;EAEA,eAAe,MAAY;AACzB,UAAM,SAAS,EAAE,eAAe,YAAY,cAAa;AACzD,WAAO,KAAK,KAAK,IAAY,GAAG,YAAY,OAAO,SAAS,IAAI,IAAI,EAAE,OAAM,CAAE;EAChF;;;uCArBW,eAAY;IAAA;EAAA;;4EAAZ,eAAY,SAAZ,cAAY,WAAA,YAFX,OAAM,CAAA;EAAA;;;sEAEP,cAAY,CAAA;UAHxB;WAAW;MACV,YAAY;KACb;;;;;ACiBM,IAAM,aAAN,MAAMA,YAAU;EAAhB,cAAA;AACG,SAAA,eAAe,OAAO,YAAY;;EAG1C,OAAO,MAAM,OAAsB;AACjC,WAAO,MAAM;EACf;EAGA,OAAO,cAAc,OAAsB;AACzC,WAAO,MAAM;EACf;EAGA,UAAU,KAAoC,QAAuB;AACnE,QAAI,IAAI,SAAQ,EAAG,MAAM,KAAK,SAAS;AAAG;AAC1C,SAAK,aAAa,iBAAiB;AACnC,WAAO,KAAK,aAAa,UAAU,OAAO,OAAO,EAAE,KACjD,IAAI;MACF,MAAM,YAAS;AACb,YAAI,WAAW;UACb,OAAO;YACL,MAAM,OAAO;YACb,OAAO,QAAQ,QAAQ,QAAQ,QAAQ,OAAO,MAAM;;SAEvD;MACH;MACA,UAAU,MAAK;AACb,aAAK,aAAa,iBAAiB;MACrC;MACA,OAAO,SAAM;AACX,cAAM,IAAI,MAAM,KAAK,OAAO,OAAO;MACrC;KACD,CAAC;EAEN;EAGA,eAAe,KAAoC,QAA4B;AAC7E,WAAO,KAAK,aAAa,UAAS,EAAG,KACnC,IAAI;MACF,MAAM,aAAU;AACd,YAAI,WAAW,QAAQ,MAAM;AAC3B,gBAAM,SAAS,QAAQ,KAAK,KAAK,WAAS,MAAM,QAAQ,OAAO,IAAI;AACnE,gBAAM,QAAQ,IAAI,SAAQ;AAC1B,cAAI,WAAW,iCACV,QADU;YAEb,eAAe;YAChB;QACH;MACF;MACA,OAAO,SAAM;AACX,cAAM,IAAI,MAAM,KAAK,OAAO,OAAO;MACrC;KACD,CAAC;EAEN;;;uCAxDWA,aAAU;IAAA;EAAA;;4EAAVA,aAAU,SAAVA,YAAU,UAAA,CAAA;EAAA;;AAcrB,WAAA;EADC,OAAO,eAAe;;AAyBvB,WAAA;EADC,OAAO,oBAAoB;;AAjCrB,WAAA;EADN,SAAQ;;AAMF,WAAA;EADN,SAAQ;;AARE,aAAU,WAAA;EAXtB,MAAuB;IACtB,MAAM;IACN,UAAU;MACR,OAAO;QACL,MAAM,CAAA;QACN,OAAO;;MAET,eAAe;;GAElB;GAEY,UAAU;;sEAAV,YAAU,CAAA;UADtB;;;",
  "names": ["BrandState"]
}
