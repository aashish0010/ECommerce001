import{a as w,b as B}from"./chunk-RS5Y662A.js";import"./chunk-DYG4SRRK.js";import"./chunk-KB4IY7G5.js";import"./chunk-BPLN47F2.js";import"./chunk-GEZV5IYQ.js";import"./chunk-7GCWGWNE.js";import"./chunk-EGSY4GXA.js";import"./chunk-B5MAJYBZ.js";import"./chunk-Z5UUMPMJ.js";import{b as C}from"./chunk-T76YTB2W.js";import"./chunk-TRFZOEGU.js";import"./chunk-VBJNOOMQ.js";import"./chunk-JD6FV722.js";import"./chunk-EPPSDJMH.js";import"./chunk-AKLBAY5S.js";import"./chunk-MZTAIRVY.js";import"./chunk-BLJSXWCQ.js";import"./chunk-Z5NDZF57.js";import"./chunk-DRBHFQD7.js";import{a as S}from"./chunk-L67E3O6K.js";import"./chunk-PPJSDG6Y.js";import{b as P}from"./chunk-V6SZFVQY.js";import{a as n}from"./chunk-6LLXT2ZV.js";import"./chunk-UJS4XQBV.js";import{b as m,e as v,g as F}from"./chunk-NLS3CEED.js";import"./chunk-X54HSUE6.js";import"./chunk-KY72HY7C.js";import"./chunk-6YNXOXNU.js";import"./chunk-BZPQ2CAT.js";import"./chunk-KWGUTIUA.js";import"./chunk-LS4OFHPH.js";import"./chunk-3ANROT57.js";import"./chunk-ECFVLSFV.js";import"./chunk-3YW7ZYO3.js";import"./chunk-XBPV4G5P.js";import{k as s}from"./chunk-HS6BDBTJ.js";import"./chunk-QOHFTPSE.js";import{A as f,Lc as b,Sb as o,Tb as u,U as l,Ub as p,Vb as c,cb as d,ha as i,tb as y}from"./chunk-63KUFEGV.js";import{a as g,b as h}from"./chunk-4CLCTAJ7.js";var E=()=>["category"],N=(()=>{class r{constructor(){this.route=i(v),this.router=i(F),this.store=i(s),this.product$=i(s).select(P.product),this.category$=i(s).select(C.selectedCategory),this.breadcrumb={title:"Category",items:[{label:"",active:!1}]},this.layout="collection_category_slider",this.skeleton=!0,this.filter={page:1,paginate:40,status:1,field:"created_at",price:"",category:"",tag:"",sort:"asc",sortBy:"asc",rating:"",attribute:""},this.totalItems=0,this.category$.subscribe(t=>{this.category=t,this.breadcrumb.title=`Category: ${this.category?.name}`,this.breadcrumb.items[0].label=this.category?.name});let e=this.route.snapshot.paramMap.get("slug");this.filter=h(g({},this.filter),{category:e}),this.store.dispatch(new n(this.filter))}ngOnInit(){this.routerEventsSubscription=this.router.events.pipe(f(e=>e instanceof m),l(()=>{let e=this.route.snapshot.paramMap.get("slug");return this.route.queryParams.pipe(l(t=>(this.filter={page:t.page?t.page:1,paginate:40,status:1,category:t.category?t.category:e,price:t.price?t.price:"",brand:t.brand?t.brand:"",tag:t.tag?t.tag:"",field:t.field?t.field:this.filter.field,sortBy:t.sortBy?t.sortBy:this.filter.sortBy,rating:t.rating?t.rating:"",attribute:t.attribute?t.attribute:""},this.store.dispatch(new n(this.filter)),[])))})).subscribe()}updateFilterAndFetchProducts(){this.category&&(this.filter.category=this.category.slug),this.store.dispatch(new n(this.filter))}changePage(e){this.filter.category=e,this.updateFilterAndFetchProducts()}changePaginate(e){this.filter.paginate=e,this.updateFilterAndFetchProducts()}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=y({type:r,selectors:[["app-category"]],decls:13,vars:5,consts:[[3,"breadcrumb"],[1,"section-b-space"],[1,"collection-wrapper"],[1,"container"],[1,"row"],[1,"col-sm-3","collection-filter"],[3,"filter","hideFilter"],[1,"collection-content","col-lg-9"],[1,"page-main-content"],[1,"col-sm-12"],[1,"collection-product-wrapper"],[3,"filter"]],template:function(t,a){t&1&&(c(0,"app-breadcrumb",0),u(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),c(6,"app-collection-sidebar",6),p(),u(7,"div",7)(8,"div",8)(9,"div",4)(10,"div",9)(11,"div",10),c(12,"app-collection-products",11),p()()()()()()()()()),t&2&&(o("breadcrumb",a.breadcrumb),d(6),o("filter",a.filter)("hideFilter",b(4,E)),d(6),o("filter",a.filter))},dependencies:[S,w,B],encapsulation:2})}}return r})();export{N as Category};
