{
  "version": 3,
  "sources": ["src/app/shared/store/action/wishlist.action.ts", "src/app/shared/services/wishlist.service.ts", "src/app/shared/store/state/wishlist.state.ts"],
  "sourcesContent": ["import { Params } from '../../interface/core.interface';\n\nexport class GetWishlistAction {\n  static readonly type = '[Wishlist] Get';\n}\n\nexport class AddToWishlistAction {\n  static readonly type = '[Wishlist] post';\n  constructor(public payload: Params) {}\n}\n\nexport class DeleteWishlistAction {\n  static readonly type = '[Wishlist] delete';\n  constructor(public id: number) {}\n}\n", "import { HttpClient } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\n\nimport { Observable } from 'rxjs';\n\nimport { environment } from '../../../environments/environment';\nimport { IWishlistModel } from '../interface/wishlist.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WishlistService {\n  private http = inject(HttpClient);\n\n  public skeletonLoader: boolean = false;\n\n  getWishlistItems(): Observable<IWishlistModel> {\n    return this.http.get<IWishlistModel>(`${environment.URL}/wishlist.json`);\n  }\n}\n", "import { Injectable, inject } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { Action, Selector, State, StateContext, Store } from '@ngxs/store';\nimport { tap } from 'rxjs';\n\nimport { IProduct } from '../../interface/product.interface';\nimport { AuthService } from '../../services/auth.service';\nimport { NotificationService } from '../../services/notification.service';\nimport { WishlistService } from '../../services/wishlist.service';\nimport {\n  GetWishlistAction,\n  AddToWishlistAction,\n  DeleteWishlistAction,\n} from '../action/wishlist.action';\n\nexport class WishlistStateModel {\n  wishlist = {\n    data: [] as IProduct[],\n    total: 0,\n  };\n  wishlistIds: number[];\n}\n\n@State<WishlistStateModel>({\n  name: 'wishlist',\n  defaults: {\n    wishlist: {\n      data: [],\n      total: 0,\n    },\n    wishlistIds: [],\n  },\n})\n@Injectable()\nexport class WishlistState {\n  private store = inject(Store);\n  router = inject(Router);\n  private wishlistService = inject(WishlistService);\n  private authService = inject(AuthService);\n  private notificationService = inject(NotificationService);\n\n  @Selector()\n  static wishlistItems(state: WishlistStateModel) {\n    return state.wishlist;\n  }\n\n  @Selector()\n  static wishlistIds(state: WishlistStateModel) {\n    return state.wishlistIds;\n  }\n\n  @Action(GetWishlistAction)\n  getWishlistItems(ctx: StateContext<GetWishlistAction>) {\n    this.wishlistService.skeletonLoader = true;\n    // if(!this.store.selectSnapshot(state => state.auth && state.auth.access_token)) {\n    //   return;\n    // }\n    return this.wishlistService.getWishlistItems().pipe(\n      tap({\n        next: result => {\n          let ids = result.data.map(product => product.id);\n          ctx.patchState({\n            wishlist: {\n              data: result.data,\n              total: result?.total ? result?.total : result.data?.length,\n            },\n            wishlistIds: ids,\n          });\n        },\n        complete: () => {\n          this.wishlistService.skeletonLoader = false;\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n\n  @Action(AddToWishlistAction)\n  add(_ctx: StateContext<WishlistStateModel>, _action: AddToWishlistAction) {\n    // Add Wishlist Logic Here\n    void this.router.navigate(['/wishlist']);\n  }\n\n  @Action(DeleteWishlistAction)\n  delete(ctx: StateContext<WishlistStateModel>, { id }: DeleteWishlistAction) {\n    const state = ctx.getState();\n    let item = state.wishlist.data.filter(value => value.id !== id);\n    ctx.patchState({\n      wishlist: {\n        data: item,\n        total: state.wishlist.total - 1,\n      },\n    });\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAEM,IAAO,oBAAP,MAAwB;;AACZ,SAAA,OAAO;EAAiB;;AAGpC,IAAO,sBAAP,MAA0B;;AACd,SAAA,OAAO;EAAkB;EACzC,YAAmB,SAAe;AAAf,SAAA,UAAA;EAAkB;;AAGjC,IAAO,uBAAP,MAA2B;;AACf,SAAA,OAAO;EAAoB;EAC3C,YAAmB,IAAU;AAAV,SAAA,KAAA;EAAa;;;;ACF5B,IAAO,kBAAP,MAAO,iBAAe;EAH5B,cAAA;AAIU,SAAA,OAAO,OAAO,UAAU;AAEzB,SAAA,iBAA0B;;EAEjC,mBAAgB;AACd,WAAO,KAAK,KAAK,IAAoB,GAAG,YAAY,GAAG,gBAAgB;EACzE;;;uCAPW,kBAAe;IAAA;EAAA;;4EAAf,kBAAe,SAAf,iBAAe,WAAA,YAFd,OAAM,CAAA;EAAA;;;sEAEP,iBAAe,CAAA;UAH3B;WAAW;MACV,YAAY;KACb;;;;;ACyBM,IAAM,gBAAN,MAAMA,eAAa;EAAnB,cAAA;AACG,SAAA,QAAQ,OAAO,KAAK;AAC5B,SAAA,SAAS,OAAO,MAAM;AACd,SAAA,kBAAkB,OAAO,eAAe;AACxC,SAAA,cAAc,OAAO,WAAW;AAChC,SAAA,sBAAsB,OAAO,mBAAmB;;EAGxD,OAAO,cAAc,OAAyB;AAC5C,WAAO,MAAM;EACf;EAGA,OAAO,YAAY,OAAyB;AAC1C,WAAO,MAAM;EACf;EAGA,iBAAiB,KAAoC;AACnD,SAAK,gBAAgB,iBAAiB;AAItC,WAAO,KAAK,gBAAgB,iBAAgB,EAAG,KAC7C,IAAI;MACF,MAAM,YAAS;AACb,YAAI,MAAM,OAAO,KAAK,IAAI,aAAW,QAAQ,EAAE;AAC/C,YAAI,WAAW;UACb,UAAU;YACR,MAAM,OAAO;YACb,OAAO,QAAQ,QAAQ,QAAQ,QAAQ,OAAO,MAAM;;UAEtD,aAAa;SACd;MACH;MACA,UAAU,MAAK;AACb,aAAK,gBAAgB,iBAAiB;MACxC;MACA,OAAO,SAAM;AACX,cAAM,IAAI,MAAM,KAAK,OAAO,OAAO;MACrC;KACD,CAAC;EAEN;EAGA,IAAI,MAAwC,SAA4B;AAEtE,SAAK,KAAK,OAAO,SAAS,CAAC,WAAW,CAAC;EACzC;EAGA,OAAO,KAAuC,EAAE,GAAE,GAAwB;AACxE,UAAM,QAAQ,IAAI,SAAQ;AAC1B,QAAI,OAAO,MAAM,SAAS,KAAK,OAAO,WAAS,MAAM,OAAO,EAAE;AAC9D,QAAI,WAAW;MACb,UAAU;QACR,MAAM;QACN,OAAO,MAAM,SAAS,QAAQ;;KAEjC;EACH;;;uCA7DWA,gBAAa;IAAA;EAAA;;4EAAbA,gBAAa,SAAbA,eAAa,UAAA,CAAA;EAAA;;AAkBxB,WAAA;EADC,OAAO,iBAAiB;;AA6BzB,WAAA;EADC,OAAO,mBAAmB;;AAO3B,WAAA;EADC,OAAO,oBAAoB;;AA3CrB,WAAA;EADN,SAAQ;;AAMF,WAAA;EADN,SAAQ;;AAZE,gBAAa,WAAA;EAXzB,MAA0B;IACzB,MAAM;IACN,UAAU;MACR,UAAU;QACR,MAAM,CAAA;QACN,OAAO;;MAET,aAAa,CAAA;;GAEhB;GAEY,aAAa;;sEAAb,eAAa,CAAA;UADzB;;;",
  "names": ["WishlistState"]
}
