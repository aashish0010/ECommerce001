{
  "version": 3,
  "sources": ["src/app/shared/store/action/wallet.action.ts", "src/app/shared/services/wallet.service.ts", "src/app/shared/store/state/wallet.state.ts"],
  "sourcesContent": ["import { Params } from '../../interface/core.interface';\n\nexport class GetUserTransactionAction {\n  static readonly type = '[Point] Transaction Get';\n  constructor(public payload?: Params) {}\n}\n", "import { HttpClient } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\nimport { Params } from '@angular/router';\n\nimport { Observable } from 'rxjs';\n\nimport { environment } from '../../../environments/environment';\nimport { IWallet } from '../interface/wallet.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WalletService {\n  private http = inject(HttpClient);\n\n  getUserTransaction(payload?: Params): Observable<IWallet> {\n    return this.http.get<IWallet>(`${environment.URL}/wallet.json`, { params: payload });\n  }\n}\n", "import { Injectable, inject } from '@angular/core';\n\nimport { Action, Selector, State, StateContext } from '@ngxs/store';\nimport { tap } from 'rxjs';\n\nimport { ITransactionsData } from '../../interface/wallet.interface';\nimport { WalletService } from '../../services/wallet.service';\nimport { GetUserTransactionAction } from '../action/wallet.action';\n\nexport class WalletStateModel {\n  wallet = {\n    balance: 0 as number,\n    transactions: {\n      data: [] as ITransactionsData[],\n      total: 0,\n    },\n  };\n}\n\n@State<WalletStateModel>({\n  name: 'wallet',\n  defaults: {\n    wallet: {\n      balance: 0 as number,\n      transactions: {\n        data: [],\n        total: 0,\n      },\n    },\n  },\n})\n@Injectable()\nexport class WalletState {\n  private walletService = inject(WalletService);\n\n  @Selector()\n  static wallet(state: WalletStateModel) {\n    return state.wallet;\n  }\n\n  @Action(GetUserTransactionAction)\n  getUserTransactions(ctx: StateContext<WalletStateModel>, { payload }: GetUserTransactionAction) {\n    return this.walletService.getUserTransaction(payload).pipe(\n      tap({\n        next: result => {\n          ctx.patchState({\n            wallet: {\n              balance: result?.balance,\n              transactions: {\n                data: result?.transactions?.data,\n                total: result?.transactions?.total\n                  ? result?.transactions?.total\n                  : result?.transactions?.data?.length,\n              },\n            },\n          });\n        },\n        error: err => {\n          ctx.patchState({\n            wallet: {\n              balance: 0,\n              transactions: {\n                data: [],\n                total: 0,\n              },\n            },\n          });\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAEM,IAAO,2BAAP,MAA+B;;AACnB,SAAA,OAAO;EAA0B;EACjD,YAAmB,SAAgB;AAAhB,SAAA,UAAA;EAAmB;;;;ACQlC,IAAO,gBAAP,MAAO,eAAa;EAH1B,cAAA;AAIU,SAAA,OAAO,OAAO,UAAU;;EAEhC,mBAAmB,SAAgB;AACjC,WAAO,KAAK,KAAK,IAAa,GAAG,YAAY,GAAG,gBAAgB,EAAE,QAAQ,QAAO,CAAE;EACrF;;;uCALW,gBAAa;IAAA;EAAA;;4EAAb,gBAAa,SAAb,eAAa,WAAA,YAFZ,OAAM,CAAA;EAAA;;;sEAEP,eAAa,CAAA;UAHzB;WAAW;MACV,YAAY;KACb;;;;;ACqBM,IAAM,cAAN,MAAMA,aAAW;EAAjB,cAAA;AACG,SAAA,gBAAgB,OAAO,aAAa;;EAG5C,OAAO,OAAO,OAAuB;AACnC,WAAO,MAAM;EACf;EAGA,oBAAoB,KAAqC,EAAE,QAAO,GAA4B;AAC5F,WAAO,KAAK,cAAc,mBAAmB,OAAO,EAAE,KACpD,IAAI;MACF,MAAM,YAAS;AACb,YAAI,WAAW;UACb,QAAQ;YACN,SAAS,QAAQ;YACjB,cAAc;cACZ,MAAM,QAAQ,cAAc;cAC5B,OAAO,QAAQ,cAAc,QACzB,QAAQ,cAAc,QACtB,QAAQ,cAAc,MAAM;;;SAGrC;MACH;MACA,OAAO,SAAM;AACX,YAAI,WAAW;UACb,QAAQ;YACN,SAAS;YACT,cAAc;cACZ,MAAM,CAAA;cACN,OAAO;;;SAGZ;AACD,cAAM,IAAI,MAAM,KAAK,OAAO,OAAO;MACrC;KACD,CAAC;EAEN;;;uCAvCWA,cAAW;IAAA;EAAA;;4EAAXA,cAAW,SAAXA,aAAW,UAAA,CAAA;EAAA;;AAStB,WAAA;EADC,OAAO,wBAAwB;;AAJzB,WAAA;EADN,SAAQ;;AAHE,cAAW,WAAA;EAbvB,MAAwB;IACvB,MAAM;IACN,UAAU;MACR,QAAQ;QACN,SAAS;QACT,cAAc;UACZ,MAAM,CAAA;UACN,OAAO;;;;GAId;GAEY,WAAW;;sEAAX,aAAW,CAAA;UADvB;;;",
  "names": ["WalletState"]
}
