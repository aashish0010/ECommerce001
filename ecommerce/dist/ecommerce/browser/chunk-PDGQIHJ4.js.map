{
  "version": 3,
  "sources": ["src/app/shared/services/attribute.service.ts", "src/app/shared/store/action/attribute.action.ts", "src/app/shared/store/state/attribute.state.ts"],
  "sourcesContent": ["import { HttpClient } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\nimport { Params } from '@angular/router';\n\nimport { Observable } from 'rxjs';\n\nimport { environment } from '../../../environments/environment';\nimport {\n  IAttribute,\n  IAttributeModel,\n  IAttributeValueModel,\n} from '../interface/attribute.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AttributeService {\n  private http = inject(HttpClient);\n\n  public skeletonLoader: boolean = false;\n  public offCanvasMenu: boolean = false;\n\n  getAttributes(payload?: Params): Observable<IAttributeModel> {\n    return this.http.get<IAttributeModel>(`${environment.URL}/attribute.json`, { params: payload });\n  }\n\n  getAttributeValues(payload?: Params): Observable<IAttributeValueModel> {\n    return this.http.get<IAttributeValueModel>(`${environment.URL}/attribute-value.json`, {\n      params: payload,\n    });\n  }\n\n  getAttribute(id: number): Observable<IAttribute> {\n    return this.http.get<IAttribute>(`${environment.URL}/attribute/${id}`);\n  }\n}\n", "import { Params } from '../../interface/core.interface';\n\nexport class GetAttributesAction {\n  static readonly type = '[Attribute] Get';\n  constructor(public payload?: Params) {}\n}\n\nexport class GetAttributeValuesAction {\n  static readonly type = '[Attribute] Value Get';\n  constructor(public payload?: Params) {}\n}\n\nexport class GetAttributeAction {\n  static readonly type = '[Attribute] Edit';\n  constructor(public id: number) {}\n}\n", "import { Injectable, inject } from '@angular/core';\n\nimport { Action, Selector, State, StateContext } from '@ngxs/store';\nimport { tap } from 'rxjs';\n\nimport { IAttribute, IAttributeValue } from '../../interface/attribute.interface';\nimport { AttributeService } from '../../services/attribute.service';\nimport {\n  GetAttributeAction,\n  GetAttributeValuesAction,\n  GetAttributesAction,\n} from '../action/attribute.action';\n\nexport class AttributeStateModel {\n  attribute = {\n    data: [] as IAttribute[],\n    total: 0,\n  };\n  attribute_values: IAttributeValue[];\n  selectedAttribute: IAttribute | null;\n}\n\n@State<AttributeStateModel>({\n  name: 'attribute',\n  defaults: {\n    attribute: {\n      data: [],\n      total: 0,\n    },\n    attribute_values: [],\n    selectedAttribute: null,\n  },\n})\n@Injectable()\nexport class AttributeState {\n  private attributeService = inject(AttributeService);\n\n  @Selector()\n  static attribute(state: AttributeStateModel) {\n    return state.attribute;\n  }\n\n  @Selector()\n  static attribute_value(state: AttributeStateModel) {\n    return (id: number | null) => {\n      if (!id) return [];\n      return state?.attribute_values\n        .filter(attr_val => +attr_val.attribute_id === id)\n        ?.map((value: IAttributeValue) => {\n          return { label: value?.value, value: value?.id };\n        });\n    };\n  }\n\n  @Selector()\n  static selectedAttribute(state: AttributeStateModel) {\n    return state.selectedAttribute;\n  }\n\n  @Action(GetAttributesAction)\n  getAttributes(ctx: StateContext<AttributeStateModel>, action: GetAttributesAction) {\n    if (ctx.getState().attribute.data.length > 0) return;\n    this.attributeService.skeletonLoader = true;\n    return this.attributeService.getAttributes(action.payload).pipe(\n      tap({\n        next: result => {\n          ctx.patchState({\n            attribute: {\n              data: result.data,\n              total: result?.total ? result?.total : result.data.length,\n            },\n          });\n        },\n        complete: () => {\n          this.attributeService.skeletonLoader = false;\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n\n  @Action(GetAttributeValuesAction)\n  getAttributeValues(ctx: StateContext<AttributeStateModel>, action: GetAttributeValuesAction) {\n    return this.attributeService.getAttributeValues(action.payload).pipe(\n      tap({\n        next: result => {\n          const state = ctx.getState();\n          ctx.patchState({\n            ...state,\n            attribute_values: result.data,\n          });\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n\n  @Action(GetAttributeAction)\n  get(ctx: StateContext<AttributeStateModel>, { id }: GetAttributeAction) {\n    return this.attributeService.getAttributes().pipe(\n      tap({\n        next: results => {\n          if (results && results.data) {\n            const state = ctx.getState();\n            const result = results.data.find(blog => blog.id == id);\n            ctx.patchState({\n              ...state,\n              selectedAttribute: result,\n            });\n          }\n        },\n        error: err => {\n          throw new Error(err?.error?.message);\n        },\n      }),\n    );\n  }\n}\n"],
  "mappings": "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",
  "names": ["AttributeState"]
}
